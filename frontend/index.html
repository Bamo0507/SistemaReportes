<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reportes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Colores principales de la página */
        :root {
            --primary: #8fcef6;
            --secondary: #c2e3f8;
            --tertiary: #ffffff;
            --accent: #5d519c;
            --surface: #744a94;
            --background: #eceff2;
            --muted: #999999;
        }
        body {
          background-color: var(--background);
          font-family: Arial, sans-serif;
        }
        header {
          background-color: var(--primary);
          width: 100vw;
          height: 10vh;
          display: flex;
          justify-content: center;
          align-items: center;
          margin: 0;
        }
        section.description {
          padding: 2vh 4vw;
          text-align: center;
        }
        hr {
          margin: 2vh auto;
          width: 90%;
          border: 1px solid var(--accentLight);
        }
        section.report-section {
          padding: 0 4vw;
        }
        .report-container {
          background-color: var(--tertiary);
          border-radius: 8px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.1);
          padding: 1.5rem;
          margin-bottom: 2rem;
        }
        .report-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        #toggleArrow {
          font-size: 1.5rem;
          cursor: pointer;
          color: var(--surface);
        }
        #filtrosContainer {
          display: none;
          margin-bottom: 1rem;
          flex-wrap: wrap;
          gap: 1rem;
        }
        #toggleContent {
          display: none;
          margin-top: 1.5rem;
        }
        .form-group {
            position: relative;
            margin-top: 1.5rem;
            width: 200px;
        }

        .form-group select {
            width: 100%;
            padding: 1.2rem 0.5rem 0.5rem;
            border: 1px solid var(--primary);
            border-radius: 5px;
            background: var(--tertiary);
            font-size: 1rem;
            color: #333;
        }

        .form-group label {
            position: absolute;
            top: 0.6rem;
            left: 0.5rem;
            background: var(--tertiary);
            padding: 0 0.25rem;
            font-size: 1.2rem;
            color: var(--accent);
            transition: 0.2s ease all;
            pointer-events: none;
        }

        .form-group select:focus + label,
        .form-group select:not(:placeholder-shown) + label {
            top: -0.6rem;
            left: 0.4rem;
            font-size: 1rem;
            color: var(--surface);
        }

        button {
            padding: 0.6rem 1.2rem;
            background-color: var(--primary);
            color: var(--tertiary);
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover {
            background-color: var(--accent);
        }
        .header-title {
          color: var(--tertiary);
          font-weight: bold;
        }
        .description-text {
          font-size: 1.2rem;
          color: var(--muted);
        }
        .report-title {
          font-size: 1.4rem;
          color: var(--primary);
        }
        .button-container {
          align-self: flex-end;
        }
    </style>
</head>

<body>

    <div id="root"></div>

    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- SCRIPT ///////////////////////////////////////////////////////////// -->
    <script type="text/babel">
        //CAMBIAR A LA QUE CORRESPONDA AL usuarios
    const apiUrl = "http://localhost:3000/";
    const { useState } = React;

        //   Un dropdown
    function FilterSelect({ id, value, onChange, label, options }) {
        return (
            <div className="form-group">
            <select
                id={id}
                value={value}
                onChange={e => onChange(e.target.value)}
                placeholder=" "
            >
                <option value="" />
                {options.map(opt => (
                <option key={opt} value={opt}>{opt}</option>
                ))}
            </select>
            <label htmlFor={id}>{label}</label>
            </div>
        );
    }

    //   Contenedor de filtros
    function FiltersPanel({ show, filters, setFilters, applyFilters }) {
        if (!show) return null;
        return (
            <div id="filtrosContainer" style={{display: "flex"}}>
            <FilterSelect
                id="marca"
                label="Marca"
                value={filters.marca}
                onChange={val => setFilters(prev => ({ ...prev, marca: val }))}
                options={["Zara","Adidas","Puma","Nike","Gap","H&M","Levis","Under Armour","Gucci","Prada"]}
            />
            <FilterSelect
                id="edad"
                label="Rango de Edad"
                value={filters.edad}
                onChange={val => setFilters(prev => ({ ...prev, edad: val }))}
                options={["Niño","Adulto"]}
            />
            <FilterSelect
                id="genero"
                label="Género"
                value={filters.genero}
                onChange={val => setFilters(prev => ({ ...prev, genero: val }))}
                options={["Masculino","Femenino","Unisex"]}
            />
            <FilterSelect
                id="categoria"
                label="Categoría"
                value={filters.categoria}
                onChange={val => setFilters(prev => ({ ...prev, categoria: val }))}
                options={["Camisa","Pantalón","Falda","Chaqueta","Vestido","Zapatos","Sudadera","Abrigo","Traje","Short"]}
            />
            <div className="button-container">
                <button onClick={applyFilters}>Generar Reporte</button>
            </div>
            </div>
        );
    }

    //   Header de un reporte con su flecha
    function ReportHeader({ title, showFilters, onToggle }) {
        return (
            <div className="report-header">
            <h2 className="report-title">{title}</h2>
            <span
                id="toggleArrow"
                onClick={onToggle}
                style={{cursor: "pointer", userSelect: "none"}}
                aria-label={showFilters ? "Ocultar filtros" : "Mostrar filtros"}
                role="button"
                tabIndex={0}
                onKeyDown={e => { if (e.key === "Enter" || e.key === " ") onToggle(); }}
            >
                {showFilters ? "\u25BC" : "\u25B2"}
            </span>
            </div>
        );
    }

    function ReportSection() {
        const [showFilters, setShowFilters] = useState(false);
        const [filters, setFilters] = useState({
          marca: "",
          edad: "",
          genero: "",
          categoria: ""
        });
        const [reportContent, setReportContent] = useState("");

        const toggleFilters = () => {
          setShowFilters(prev => !prev);
          setReportContent("");
        };

        const applyFilters = () => {
          setReportContent(
            `Reporte generado con filtros: Marca=${filters.marca || "Todos"}, Edad=${filters.edad || "Todos"}, Género=${filters.genero || "Todos"}, Categoría=${filters.categoria || "Todos"}`
          );
        };

        return (
          <section className="report-section">
            <div className="report-container">
              <ReportHeader
                title="Reporte de usuarios con más ventas"
                showFilters={showFilters}
                onToggle={toggleFilters}
              />
              <FiltersPanel
                show={showFilters}
                filters={filters}
                setFilters={setFilters}
                applyFilters={applyFilters}
              />
              <div id="toggleContent" style={{ marginTop: "1.5rem" }}>
                {reportContent && <p>{reportContent}</p>}
              </div>
            </div>
          </section>
        );
    }

    function App() {
        return (
            <>
            <header>
                <h1 className="header-title">Reportes</h1>
            </header>

            <section className="description">
                <p className="description-text">
                Este sistema permite generar reportes visuales de las ventas y el inventario.
                </p>
                <hr />
            </section>

            <ReportSection />
            </>
    );
    }

    const rootElement = document.getElementById("root");
    ReactDOM.createRoot(rootElement).render(<App />);
    </script>
</body>

</html>